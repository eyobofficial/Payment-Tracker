{% extends 'orders/base.html' %}
{% load humanize %}

{% block title %}Delivery Orders | Payment Tracker{% endblock %}

{% block content %}
  <div class="d-sm-flex align-items-center justify-content-between mg-b-20 mg-lg-b-25 mg-xl-b-30">
    <div>
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb breadcrumb-style1 mg-b-10">
          <li class="breadcrumb-item"><a href="#">Dashboard</a></li>
          <li class="breadcrumb-item active" aria-current="page">Delivery Orders</li>
        </ol>
      </nav>
      <h4 class="mg-b-0 tx-spacing--1">All Open Delivery Orders</h4>
    </div>
    <div class="d-none d-md-block">
      <button class="btn btn-sm pd-x-15 btn-primary btn-uppercase mg-l-5 btn-modal"
        data-url="{% url 'orders:open-order-create' %}">
        <i data-feather="plus" class="wd-10 mg-r-5"></i>Add Delivery Order
      </button>
    </div>
  </div>

  <div class="row row-xs">
    <div class="col-sm-6 col-lg-3">
      <div class="card card-body">
        <h6 class="tx-uppercase tx-11 tx-spacing-1 tx-color-02 tx-semibold mg-b-8">Conversion Rate</h6>
        <div class="d-flex d-lg-block d-xl-flex align-items-end">
          <h3 class="tx-normal tx-rubik mg-b-0 mg-r-5 lh-1">0.81%</h3>
          <p class="tx-11 tx-color-03 mg-b-0"><span class="tx-medium tx-success">1.2% <i
                class="icon ion-md-arrow-up"></i></span> than last week</p>
        </div>
        <div class="chart-three">
          <div id="flotChart3" class="flot-chart ht-30"></div>
        </div><!-- chart-three -->
      </div>
    </div><!-- col -->
    <div class="col-sm-6 col-lg-3 mg-t-10 mg-sm-t-0">
      <div class="card card-body">
        <h6 class="tx-uppercase tx-11 tx-spacing-1 tx-color-02 tx-semibold mg-b-8">Unique Purchases</h6>
        <div class="d-flex d-lg-block d-xl-flex align-items-end">
          <h3 class="tx-normal tx-rubik mg-b-0 mg-r-5 lh-1">3,137</h3>
          <p class="tx-11 tx-color-03 mg-b-0"><span class="tx-medium tx-danger">0.7% <i
                class="icon ion-md-arrow-down"></i></span> than last week</p>
        </div>
        <div class="chart-three">
          <div id="flotChart4" class="flot-chart ht-30"></div>
        </div><!-- chart-three -->
      </div>
    </div><!-- col -->
    <div class="col-sm-6 col-lg-3 mg-t-10 mg-lg-t-0">
      <div class="card card-body">
        <h6 class="tx-uppercase tx-11 tx-spacing-1 tx-color-02 tx-semibold mg-b-8">Avg. Order Value</h6>
        <div class="d-flex d-lg-block d-xl-flex align-items-end">
          <h3 class="tx-normal tx-rubik mg-b-0 mg-r-5 lh-1">$306.20</h3>
          <p class="tx-11 tx-color-03 mg-b-0"><span class="tx-medium tx-danger">0.3% <i
                class="icon ion-md-arrow-down"></i></span> than last week</p>
        </div>
        <div class="chart-three">
          <div id="flotChart5" class="flot-chart ht-30"></div>
        </div><!-- chart-three -->
      </div>
    </div><!-- col -->
    <div class="col-sm-6 col-lg-3 mg-t-10 mg-lg-t-0">
      <div class="card card-body">
        <h6 class="tx-uppercase tx-11 tx-spacing-1 tx-color-02 tx-semibold mg-b-8">Order Quantity</h6>
        <div class="d-flex d-lg-block d-xl-flex align-items-end">
          <h3 class="tx-normal tx-rubik mg-b-0 mg-r-5 lh-1">1,650</h3>
          <p class="tx-11 tx-color-03 mg-b-0"><span class="tx-medium tx-success">2.1% <i
                class="icon ion-md-arrow-up"></i></span> than last week</p>
        </div>
        <div class="chart-three">
          <div id="flotChart6" class="flot-chart ht-30"></div>
        </div><!-- chart-three -->
      </div>
    </div><!-- col -->

    <div class="col-sm-12 mg-t-20 mg-b-40">
      <div class="card mg-b-10">
        <div class="card-header pd-t-20 d-sm-flex align-items-start justify-content-between bd-b-0 pd-b-0">
          <div>
            <h6 class="mg-b-5 pb-1">Open Distribution Orders</h6>
          </div>
        </div><!-- card-header -->
        <div class="table-responsive">
          <table class="table table-dashboard mg-b-0">
            <thead>
              <tr>
                <th>Date</th>
                <th>Vessel</th>
                <th>Letter of Credit</th>
                <th>Supplier</th>
                <th>Product</th>
                <th class="text-right">Total 10% Amount (ETB)</th>
                <th class="text-right">Amount Paid (ETB)</th>
                <th class="text-right">Status</th>
              </tr>
            </thead>
            <tbody>
              {% for order in object_list %}
              <tr>
                <td class="tx-color-03 tx-normal">{{ order.created_at|date:'d/m/Y' }}</td>
                <td class="tz-color-03 tx-medium">
                  <a href="{% url 'orders:open-order-detail' order.pk %}">{{ order.vessel }}</a>
                </td>
                <td class="tz-color-03 tx-normal">{{ order.lc_number }}</td>
                <td class="tz-color-03 tx-normal">{{ order.batch.supplier.name }}</td>
                <td class="tz-color-03 tx-normal">{{ order.batch.product.name }}</td>
                <td class="text-right tx-teal">50,975,256,580.00</td>
                <td class="tz-color-03 tx-normal text-right">+ 2,898,670.90
                  <span class="mg-l-5 tx-11 tx-normal tx-danger">6%</span>
                </td>
                <td class="text-right"><span class="badge badge-success">open</span></td>
              </tr>
              {% empty %}
              <tr>
                <td colspan="8" class="tx-medium tx-color-03 text-center pt-5 pb-5">No Open Delivery Order</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div><!-- table-responsive -->
      </div><!-- card -->
    </div><!-- col -->
  </div><!-- row -->
{% endblock %}
